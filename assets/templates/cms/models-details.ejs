<script id="template-models-details" type="text/template">
<div class="row span12">
	<div class="hero-unit">
		<h1>
			<!-- show the inline edit for the model name if this is a new model -->
			<div class="inlineContainer" ng-show="isNew">
				<i class="icon-edit"></i>
				<span class="inlineEdit" ng-bind-html="model.globalId" ng-model="model.globalId" contentEditable="true" placeholder="modelName"></span>
			</div>
			<!-- otherwise just render the model name -->
			<span ng-show="!isNew">{{model.globalId}}</span>
			<span>Model</span>
		</h1>
	</div>

	<form class="form-horizontal">
		<!-- error and success messages -->
		<div class="alert alert-success" ng-show="saved">
		  <button type="button" class="close" ng-click="clearSaved()">&times;</button>
		  <strong>Success!</strong> Your model has been updated.  You will need to restart sails to see your changes.
		</div>
		<div class="alert alert-error" ng-show="error">
		  <button type="button" class="close" ng-click="clearError()">&times;</button>
		  <strong>Error!</strong> {{error}}
		</div>
		<!-- render for each of the attributes -->
		<div ng-repeat="val in attributes">

			<!-- only show autogenerated attributes if show-autogenerated is checked -->
			<div ng-show="showAutoGenerated && autoGenerated(val._key) || !autoGenerated(val._key)">

				<!-- inline key-name editing unless it is an autogenerated attribute -->
				<h3 ng-class="{autoGenerated: autoGenerated(val._key)}" ng-show="autoGenerated(val._key)">{{val._key}}</h3>
				<div ng-show="!autoGenerated(val._key)">
					<h3>
						<i class="icon-edit"></i>
						<span class="inlineEdit" ng-bind-html="val._key" ng-model="val._key" contentEditable="true" placeholder="key"></span>
					</h3>
				</div>

				<!-- type select unless it is an autogenerated attribute -->
				<div class="control-group">
					<label class="control-label" for="type{{val._key}}">Type</label>
					<div class="controls">
					    <select ng-model="val.type" id="type{{val._key}}" ng-show="!autoGenerated(val._key)">
					    	<option value="STRING">STRING</option>
					    	<option value="INTEGER">INTEGER</option>
					    	<option value="DATE">DATE</option>
					    </select>
					    <!-- dont allow editing for auto-generated -->
					    <span class="input-xlarge uneditable-input" ng-show="autoGenerated(val._key)">{{val.type}}</span>
					</div>
				</div>

				<!-- default uneditable only shows for for autogenerated attribute -->
				<div class="control-group" ng-show="autoGenerated(val._key)">
					<label class="control-label" for="default{{val._key}}">Default</label>
				    <div class="controls">
					    <input class="input-xlarge" type="text" placeholder="" ng-model="val.default" id="default{{val._key}}" ng-show="!autoGenerated(val._key)"/>
					    <!-- dont allow editing for auto-generated -->
					    <span class="input-xlarge uneditable-input" ng-show="autoGenerated(val._key)">{{val.default}}</span>
					</div>
				</div>

				<!-- auto-increment select only shows for type integer -->
				<div class="control-group" ng-show="val.type == 'INTEGER'">
					<label class="control-label" for="autoIncrement{{val._key}}">
						autoIncrement
					</label>
					<!-- auto-increment select only shows for non-auto-generated attributes -->
				    <div class="controls">
					    <select ng-model="val.autoIncrement" id="autoIncrement{{val._key}}" ng-show="!autoGenerated(val._key)">
					    	<option value="true">true</option>
					    	<option value="">false</option>
					    </select>
					    <!-- dont allow editing for auto-generated -->
					    <span class="input-xlarge uneditable-input" ng-show="autoGenerated(val._key) && val.autoIncrement">{{val.autoIncrement}}</span>
					</div>
				</div>

				<!-- remove property button only for non-auto-generated -->
				<div class="control-group" ng-show="!autoGenerated(val._key)">
					<div class="controls">
						<button ng-click="removeProperty($index)"><i class="icon-minus-sign"></i> Remove Attribute</button>
					</div>
				</div>

			</div>
		</div>

		<hr />

		<!-- Show auto-generated and add attribute buttons -->
		<div class="control-group">
			<label class="checkbox pull-left">
				<input type="checkbox" ng-model="showAutoGenerated"> Show Auto Generated Properties
		    </label>
		    <label class="pull-left">
				<button ng-click="addProperty()"><i class="icon-plus-sign"></i> Add Attribute</button>
			</label>
	   	</div>

	   	<!-- update/create button and display for the sails command -->
	   	<div class="control-group">
		    <span class="input-xxlarge uneditable-input">{{generateCommand()}}</span>
		    <button ng-show="!isNew" type="submit" class="btn" ng-click="updateModel()">Update Model</button>
		    <button ng-show="isNew" type="submit" class="btn" ng-click="updateModel()">Create Model</button>
		</div>
	</form>
</div>
</script>